所有 DNS 服务器都属于以下四个类别之一：

-   递归解析器
-   根域名服务器
-   TLD 域名服务器
-   权威性域名服务器

在典型 DNS 查找中（当没有正在进行的高速缓存时），这四个 DNS 服务器协同工作来完成将指定域的 IP 地址提供给客户端的任务（客户端通常是一个存根解析器 - 内置于操作系统的简单解析器）

**在DNS查询过程中，递归解析器发出的请求并不是简单地被重定向，而是重新发出请求。具体来说，每一步查询的响应会指示递归解析器下一步该向哪里发送请求**

![DNS服务器](https://cloud.intro-iu.top:738/d/ThreeBody/ZeroHzzzzPic/202408210020173.png)
![DNS服务器](https://cloud.intro-iu.top:738/d/ThreeBody/ZeroHzzzzPic/202408210020383.png)

## 递归解析器

递归解析器（也称为 DNS 解析器）是 DNS 查询中的第一站。递归解析器作为客户端与 DNS 域名服务器的中间人。

-   从 Web 客户端收到 DNS 查询后，递归解析器将使用缓存的数据进行响应，或者将向根域名服务器发送请求
-   接着向 TLD 域名服务器发送另一个请求
-   然后向权威性域名服务器发送最后一个请求。
-   收到来自包含已请求 IP 地址的权威性域名服务器的响应后，递归解析器将向客户端发送响应。

递归解析器将缓存从权威性域名服务器收到的信息。当一个客户端请求的域名 IP 地址是另一个客户端最近请求的 IP 地址时，解析器可绕过与域名服务器进行通信的过程，并**仅从客户端的缓存中为客户端提供所请求的记录**。

## DNS 根域名服务器

根域名服务器负责处理顶级域名（TLD）的查询，根据该域的扩展名（.com、.net、.org 等），通过将递归解析器定向到 TLD 域名服务器进行响应

根域名服务器共有13种类型，分别**由A到M标识**，每种类型的根域名服务器在全球由多个物理副本，并且通过 [[Anycast]] 共享一个IP地址，以提高查询的响应速度和可靠性。总共约有600多个实例分布在全球

由于 DNS 根区域位于 DNS 层次结构的顶部，因此递归解析器无法在 DNS 查找中被引导到这些位置。因此，每个 DNS 解析器都在其软件中内置了 13 个 IP 根服务器地址的列表。每次发起 DNS 查找时，递归器的第一个通信就是与这 13 个 IP 地址之一进行的。

## TLD 域名服务器

TLD域名服务器负责管理和解析顶级域（TLD）的查询。当递归解析器从根域名服务器获得TLD信息后，它会向相应的TLD域名服务器发送查询。当递归解析器从根域名服务器获得TLD信息后，它会向相应的TLD域名服务器发送查询

TLD域名服务器负责维护共享同一个顶级域名（如.com、.net、.org等）的所有域名的信息。例如，.com TLD域名服务器包含所有以“.com”结尾的网站的信息。

IANA 将 TLD 服务器分为两个主要组：

-   通用顶级域：这些是非特定国家/地区的域，一些最知名的通用 TLD 包括 .com、.org、.net、.edu 和 .gov。
-   国家/地区代码顶级域：这些包括特定于某个国家/地区或州的任何域。例如，uk、.us、.ru 和 .jp 等。
-   对于基础设施域实际上存在第三个类别，但该类别几乎从不使用。此类别是为 .arpa 域创建的，**该域是在创建新式 DNS 时使用的过渡域**；其当今主要是具有历史意义。

## 权威性域名服务器

权威性域名服务器通常是解析器查找 IP 地址过程中的最后一步。当递归解析器收到来自 TLD 域名服务器的响应时，该响应会将解析器定向到权威性域名服务器。

权威名称服务器包含特定于其服务域名的信息（例如，google.com）权威性域名服务器包含特定于其所服务的域名的信息（例如 google.com），并且它可为递归解析器提供在 [[A记录|DNS A]]记录中找到的服务器的 IP 地址，或者如果该域具有 [[给GitHub Pages配置CNAME#什么是 DNS CNAME 记录|CNAME]] 记录（别名），它将为递归解析器提供一个别名域，这时递归解析器将**必须执行全新 DNS 查找**，以便从权威性域名服务器获取记录（通常为包含 IP 地址的 A 记录）
