Anycast 是一种网络寻址和路由方法，可以将传入请求路由到各种不同的位置或“节点”。

在 [[CDN]] 的上下文中，Anycast 通常会将传入的流量路由到距离最近并且能够有效处理请求的数据中心。选择性路由使 Anycast 网络能够应对高流量、网络拥塞和 [[DDoS 攻击|DDoS攻击]]。

## 如何工作

Anycast 允许多个数据中心使用相同的 IP 地址提供服务。当一个连接请求进入 Anycast 网络时，网络会根据预设的优先级或策略，将请求路由到最合适的数据中心。通常，这种选择是基于**地理距离或网络延迟**，即选择离请求方最近的数据中心来处理请求，从而减少网络延迟和提高服务响应速度。

Anycast 的一个显著特征是“许多关联中的一对一”——也就是说，尽管多个数据中心都可以使用相同的 IP 地址，但每次请求只会被路由到其中的一个数据中心进行处理。这种方式在互联网协议中非常常见，也是主要的 **5 种网络协议方法**之一，用于优化网络资源和提升用户体验。

## 为什么使用 Anycast

如果同时向同一**源服务器**发出许多请求，该服务器可能会不堪重负，无法高效响应其他入站请求。在 Anycast 网络中，负载可以分散到其他可用的数据中心，而不是仅由一台源服务器来承担最主要的流量，每个数据中心都拥有能够处理并响应入站请求的服务器。这种**路由**方法可以防止源服务器扩展容量，以及避免向源服务器请求获取内容的客户端遭遇服务中断。

## Anycast 和单播有什么区别

大多数 Internet 通过称为“**单播**”的路由方案工作。在单播下，网络上的每个节点都有一个唯一的 IP 地址。家庭和办公室网络使用单播；如果一台计算机连接到无线网络并收到一条消息，指出 IP 地址已被使用，这时发生了 IP 地址冲突，因为同一单播网络上的另一台计算机已在使用同一个 IP。在大多数情况下，这是不允许的。

如果 CDN 使用单播地址，流量会直接路由到特定的节点。当网络遇到异常流量时（例如在 DDoS 攻击期间），这会造成漏洞。由于流量直接路由到特定的数据中心，该位置或其周围的基础设施可能会被流量所压垮，进而可能导致合法请求遭受拒绝服务。

使用 Anycast 意味着网络可以极有弹性。由于流量会找到最佳路径，因此整个数据中心脱机也没有关系，流量会自动流向邻近的数据中心。
