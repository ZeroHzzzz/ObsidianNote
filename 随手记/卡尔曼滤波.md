# 什么是滤波

滤波是信号里面的一个概念，简单说就是从信号里挑出我们想要的部分，同时尽量去掉那些不需要的部分或噪声。

卡尔曼滤波它的核心思想其实是把多个含有误差的数据​**​融合​**​在一起。通过这种融合计算，我们能在很大程度上降低误差的影响，最终得到对真实情况更准、更可靠的一个估计结果。这个过程本质上也是提取更干净、更有用的信息，对两个存在误差的数据中有用的部分进行了增强，就像是过滤掉测量中的噪声，所以这玩意也叫做滤波。

#  Previously

卡尔曼滤波，用直白的话来讲，就是你有多个不确定的数据，经过一系列的算法过程，然后能获得一个相对准确的结果。

他是一种递归算法，有几个前提条件：

- 当前时刻状态只和**上一时刻**状态有关。这个讲的高级点就是**马尔可夫性**
- 模型和系统均满足**线性**关系
- 噪声符合**高斯**分布

对于和多时刻状态有关、非线性、非高斯问题，就不能简单地使用卡尔曼滤波。例如使用拓展卡尔曼滤波器进行姿态解算，此时的卡尔曼滤波器是拓展的，适用于非线性的情况。这是后话。

他通过预测和更新两个步骤来实现对系统状态的最优估计：

- **预测**：基于前一时刻的状态估计值和当前的系统模型，预测当前时刻的状态
- **更新**：当获得当前时刻的观测值后，利用这个信息来修正预测值，得到一个更精确的状态估计值

# 来个例子

我们需要一个例子来辅助理解。我们可以使用卡尔曼滤波来融合IMU（惯性测量单元）和编码器的数据，从而估计相对于初始位置的二维坐标 (x, y)。

首先我们知道，encoder是编码器数据，这里是我们假设使用的是正交编码器，安装在车轮上，因此我们可以知道轮速、行驶距离。但是这个数据并不一定能准确代表车体信息，因为轮子和地面可能会存在打滑的情况。

imu这里我们假设使用的是六轴的imu，三轴加速度计（`acc`）和三轴陀螺仪（`gyro`）数据。这里的问题是imu数据可能会随时间而不可避免的产生漂移误差。

# 什么是状态转移方程

这个方程描述​**​系统真实状态如何从当前时刻 `k-1` 演变到下一时刻 `k`​**​。它是基于对系统运动规律的物理理解或数学建模。
