模式就是指处理器模式，也就是用户模式和内核模式。那么进程运行过程中，大概率是会发生模式的转换的。

## 用户模式到内核模式

用户模式到内核模式的转换很常见，原因无非就是三个：

- 中断：中断是异步事件，是由外部事件触发的，和进程本身无关，可以在任何用户模式指令之后触发进入内核模式。中断还分好几种：
    - 定时器中断，这是为了让控制权定时的回到内核以决定是不是要停止应用程序。
    - 外部中断：比方说键盘和鼠标发出的中断信号。
    - 处理器间中断：一个处理器可以向其他处理器发出中断，这是为了协调处理器之间的操作，比方说需要停止一个并行程序，那么我们需要发送中断，以阻止这个程序在其他处理器上继续运行。
    - 其实还有一种可以替代中断的方法，那就是**轮询**。内核有时候会循环检查每个IO设备，查看是否有需要处理的事件。但是其实[[缓冲区描述符]]+中断的方式更高效一些。
- 处理器异常：这是用户程序引起的异常事件。和中断一样，硬件会完成所有之前的指令，保存执行状态，然后将控制权交给内核。程序断点和[[虚拟化]]也是使用处理器异常实现的。
- 系统调用：这个是让应用程序主动从用户模式进入内核模式。为了保护内核免受行为不当的用户程序的侵害，硬件必须在系统调用时将控制权转移到预定义的地址上——用户进程不能被允许跳转到内核的任意位置。
