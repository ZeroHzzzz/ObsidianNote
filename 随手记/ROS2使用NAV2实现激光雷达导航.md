## NAV2主要组件

### BT Navigator Server（导航行为树服务器）

-   **功能**：BT Navigator Server是Nav2中的行为树（Behavior Tree）管理器。行为树是一种组织和调度不同导航任务的方法。BT Navigator Server负责调用和管理下面的三个小服务（Planner Server、Controller Server、Recovery Server），以实现机器人导航任务的高层逻辑控制。
-   **行为树的作用**：它允许在任务中使用逻辑控制，例如顺序、选择、并行执行等，这使得导航任务可以变得更加灵活和可扩展。比如，可以定义在某个条件下切换到特定的恢复行为。

### Planner Server（规划服务器）

-   **功能**：Planner Server负责全局路径规划，即计算从机器人当前位置到目标位置的最佳路径。这通常涉及到在一个已知的地图上计算出避免障碍物的路径。使用的算法通常包括A\*、Dijkstra等。
-   **配置**：开发者可以选择不同的全局路径规划器插件（例如NavFn、SmacPlanner等）来适应不同的导航需求。配置这些插件的参数可以影响路径的规划质量和效率。

### Controller Server（控制服务）

-   **功能**：控制服务器（或局部规划器）负责根据全局规划的路径，实时控制机器人沿着这条路径行进。它需要处理实际的传感器输入和可能的动态障碍物，做出调整以保持在路径上。常用的方法包括DWA（动态窗口法）、TEB（时间弹性带）等。
-   **配置**：类似于规划服务器，控制服务器也可以使用不同的控制器插件。每个插件有不同的特点，例如对速度、路径跟随精度、避障能力的要求等。

### Recovery Server（恢复服务器）

-   **功能**：Recovery Server在机器人遇到异常情况（如遇到无法避开的障碍物、导航失败等）时被调用。恢复器的目标是采取措施使机器人回到正常的导航状态。例如，如果机器人卡在某个地方，可以尝试后退、旋转或选择新的路径。
-   **配置**：Nav2提供了几种默认的恢复行为（如旋转恢复、清除路径等），但开发者也可以定义自己的恢复行为以满足特定需求。
